!async function(e,t,r){if(e.navigator.userAgent.search(/(bot|spider|crawl|preview)/gi)>-1)return;let o,a,s=e.localStorage.getItem("pushbroom:blocked");const n=e=>{if(s)return new Promise(((e,t)=>{}));const t=new XMLHttpRequest;return new Promise(((r,o)=>{t.onreadystatechange=()=>{4===t.readyState&&r(t.response)},t.open("GET",e),t.send()}))},c=(e,t)=>{let s=`${r}/ping?type=${e}&${(e=>Object.keys(e).map((t=>`${t}=${encodeURIComponent(e[t])}`)).join("&"))(t)}&session=${o}&previous=${a}`;return n(s)},i=e=>e.getAttributeNames().filter((e=>e.startsWith("pb:")||"url"===e)).reduce(((t,r)=>({...t,[r]:e.getAttribute(r)})),{}),l=async()=>{a=await c("Pageview",i(t.querySelector("pushbroom")))};let u=new MutationObserver(l),b=new IntersectionObserver(((e,t)=>{e[0].isIntersecting&&c(e[0].target.dataset.pushbroom,i(e[0].target))}));t.querySelectorAll("[data-pushbroom]").forEach((e=>b.observe(e))),t.querySelectorAll("pushbroom").forEach((e=>u.observe(e,{attributes:!0})));e.pushbroom={block(t){s?(s=null,e.localStorage.removeItem("pushbroom:blocked")):(s=!0,e.localStorage.setItem("pushbroom:blocked",!0))}},e.addEventListener("click",(e=>{e.target.dataset["pushbroom:click"]&&c(e.target.dataset["pushbroom:click"],i(e.target))})),o=await n(`${r}/cache`),await l()}(window,document,"http://localhost:5173");